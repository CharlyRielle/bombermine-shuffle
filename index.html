<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
	<link href="css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet">
	<script src="lib/jquery-1.10.2.min.js"></script>
	<script src="lib/jquery-ui-1.10.3.custom.min.js"></script>
	
	<!-- GAME -->
	
	<script src="js/config.js"></script>
	<script src="js/map.js"></script>
	<script src="js/renderer.js"></script>
	<script src="js/builder.js"></script>
	<script src="js/editor.js"></script>
	<script src="js/resources.js"></script>
	
	<!-- Application -->
	
	<script src="js/app.js"></script>
	<script src="js/anim.js"></script>
	<script src="tiles.js"></script>
	<script src="entities.js"></script>
	<script src="save/map72x72.js"></script>
	<script>
		$(function() {
			app.start();
			
			initToolBar();
	$("#builder-outer").draggable();
		});
	</script>
	
	<script>

function initToolBar() {		
	$( "#action-fill" ).button({
    }).click(function() {
		app.game.editor.fill();
		app.renderer.renderAll();
	});
	$( "#action-copy" ).button({
		icons: {
			primary: "ui-icon-copy"
		  }
    }).click(function() {
		app.game.editor.copy();
		app.saveSettings();
		app.renderer.renderAll();
	});
	$( "#action-paste" ).button({
		icons: {
        primary: "ui-icon-clipboard"
      }
    }).click(function() {
		var canvas = $("#screen")[0];
		app.game.editor.paste(app.renderer.point(canvas.width/2, canvas.height/2));
		app.renderer.renderAll();
		$("#tool-cursor").click();
	});
	$( "#action-undo" ).button({
		icons: {
			primary: "ui-icon-arrowreturn-1-w"
		  }
    }).click(function() {
		app.undo();
	});
	$( "#action-redo" ).button({
		icons: {
			primary: "ui-icon-arrowreturn-1-e"
		  }
    }).click(function() {
		app.redo();
	});
    $( "#action-zoom" ).button({
      icons: {
        primary: "ui-icon-zoomin"
      }
    }).click(function(){
		if (app.renderer.camScale == 1.0)
			app.renderer.camScale = 1.5;
		else app.renderer.camScale = 1.0;
		app.renderer.renderAll();
	})
	
    $( "#tool" ).buttonset();
	$( "#tool-cursor" ).click(function() {
		app.tool = 0;
	})
	$( "#tool-pencil" ).click(function() {
		app.tool = 1;
	})
	$( "#tool-select" ).click(function() {
		app.tool = 2;
	})
	
    $( "#debug_chunks" ).button().click(function() {
		app.renderer.debug_chunks = !app.renderer.debug_chunks;
		app.renderer.renderAll();
	}); 
    $( "#debug_zones" ).button().click(function() {
		app.renderer.debug_zones = !app.renderer.debug_zones;
		app.renderer.renderAll();
	}); 
    $( "#add_entities" ).button().click(function() {
		app.game.randomize(app.resources.entities);
		app.renderer.renderAll();
	}); 
    $( "#remove_entities" ).button().click(function() {
		app.game.clearEntities();
		app.renderer.renderAll();
	}); 
}
</script>
	
	<style>
  #toolbar { padding: 4px; display: inline-block;position: absolute; left: 20px; top: 20px; }
  body {
		font-family: "Trebuchet MS", "Helvetica", "Arial",  "Verdana", "sans-serif";
		font-size: 62.5%;
	}
	
  #builder-outer { position: absolute; left: 20px; top:70px; width: 416px; height: 250px; padding: 5px; padding-top: 16px; z-index: 100 }
  #builder { }
	</style>
</head>
<body>

<canvas id="screen" border="0"></canvas>

</body><div id="toolbar" class="ui-widget-header ui-corner-all">
  <span id="tool">
    <input type="radio" id="tool-cursor" name="tool" checked="checked" /><label for="tool-cursor">Cursor</label>
    <input type="radio" id="tool-pencil" name="tool" /><label for="tool-pencil">Pencil</label>
    <input type="radio" id="tool-select" name="tool" /><label for="tool-select">Select</label>
  </span>
  <button id="action-fill">fill</button>
  <button id="action-copy">copy</button>
  <button id="action-paste">paste</button>
  <button id="action-zoom">zoom</button>
  <button id="action-undo">undo</button>
  <button id="action-redo">redo</button>
  <button id="add_entities">Add entities</button>
  <button id="remove_entities">Remove entities</button>
  <input type="checkbox" id="debug_chunks" /><label for="debug_chunks">Show chunks</label>
  <input type="checkbox" id="debug_zones" /><label for="debug_zones">Show zones</label>
</div>

<div id="builder-outer" class="ui-widget-content">
  <canvas id="builder"></canvas>
</div>

</html>